# 单元测试

**单元测试是软件质量的重要保证。**

1. 通常成熟可靠的开源产品都有完善的单元测试，并且覆盖率可以达到 80%以上。

2. 单元测试的重要性：

- 保证并且展示开发质量；
- 提高重构的信心；
- 团队合作的基石。

**注意：早期过度的追求 100% 测试覆盖率会带来过多的开发成本。**

3. 开源社区中，团队合作面临很高的不确定性，因为没有当面的沟通，任何人都可能给你的项目提交贡献代码。单靠人工来判断每一个 PR 的代码质量是不可能的，这也需要单元测试来帮忙。

4. Jest 是 Facebook 开发的 Javascript 测试框架，用于创建、运行和编写测试的 JavaScript 库。

**Jest 是目前前端最流行的测试库之一。**

5. 单元测试是针对开发的最小单位展开的测试，一般是函数。在测试函数调用函数的情况，如：A 函数 调用 B 函数，测试的主体是 A 函数，B 函数应该与测试无关，需要孤立 B 函数来测试 A 函数。

6. 测试前端页面

由于 node 中没有 DOM 模型，解决的办法有两个：

- 将测试用例放到浏览器中运行；
- 用 DOM 仿真模拟一个 DOM 对象。

7. 在 vite 栈项目中，推荐使用 Vitest 作为测试框架。

- Vitest 是一个基于 Vite 的测试框架，它可以做到与 Vite 通用配置；
- Vite 兼容了大部分 Jest 的使用方法；
- Vitest 更加注重性能，尽可能多地使用 Worker 线程并发执行，可以提高测试的运行效率。

8. 配置 Vitest 测试组件库需要以下三个库：

- vitest ：测试框架，用于执行整个测试过程并提供断言库、mock、覆盖率；
- happy-dom：是用于提供在 Node 环境中的 Dom 仿真模型；
- @vue/test-utils 工具库： Vue 推荐的测试工具库。

## 测试覆盖率

## 要点

1. 在代码编写阶段，建议只对重点功能进行测试，没必要一定最求过高的测试覆盖率。
